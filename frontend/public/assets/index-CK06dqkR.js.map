{"version":3,"mappings":";i8BASiBA,EAAEC,EAAiBC,EAAEC,OAAOC,IAAI,iBAAiBC,EAAEF,OAAOC,IAAI,kBAAkBE,EAAEC,OAAOC,UAAUC,eAAeC,EAAEV,EAAEW,mDAAmDC,kBAAkBC,EAAE,CAACC,KAAI,EAAGC,KAAI,EAAGC,QAAO,EAAGC,UAAS,GAChP,SAASC,EAAEC,EAAEC,EAAEC,GAAG,IAAIC,EAAEC,EAAE,GAAGC,EAAE,KAAKC,EAAE,KAAiF,IAAIH,UAAvE,IAAAD,IAAIG,EAAE,GAAGH,QAAG,IAASD,EAAEN,MAAMU,EAAE,GAAGJ,EAAEN,UAAc,IAAAM,EAAEL,MAAMU,EAAEL,EAAEL,KAAcK,EAAEd,EAAEoB,KAAKN,EAAEE,KAAKT,EAAEJ,eAAea,KAAKC,EAAED,GAAGF,EAAEE,IAAI,GAAGH,GAAGA,EAAEQ,aAAiB,IAAAL,KAAKF,EAAED,EAAEQ,kBAAe,IAASJ,EAAED,KAAKC,EAAED,GAAGF,EAAEE,IAAI,MAAM,CAACM,SAAS1B,EAAE2B,KAAKV,EAAEL,IAAIU,EAAET,IAAIU,EAAEK,MAAMP,EAAEQ,OAAOrB,EAAEsB,QAAQ,YAAkB3B,EAAa4B,EAAAC,IAAChB,EAAEe,EAAAE,KAAajB,ECPjWkB,EAAAC,QAAUpC,oBCDfK,EAAIL,EAENqC,EAAqBhC,EAAEgC,WACChC,EAAAiC,w/BCHbC,EAAgBC,EAAMC,OAAO,CACxCC,QAAgF,OAChFC,iBAAiB,ICGNC,EAAeH,GAAO,CAACI,EAAKC,KAAS,CAChDC,SAAU,KACVC,aAAa,EACbC,aAAa,EACbC,mBAAmB,EACnBC,gBAAgB,EAChBC,YAAa,GACbC,OAAQ,KAERC,UAAWC,UACL,IACF,MAAMC,QAAYjB,EAAcO,IAAI,eAEpCD,EAAI,CAAEE,SAAUS,EAAIC,OACpBX,IAAMY,sBACCC,GAEHd,EAAA,CAAEE,SAAU,MAAM,CACtB,QACIF,EAAA,CAAEM,gBAAgB,GAAO,GAIjCS,OAAQL,MAAOE,IACTZ,EAAA,CAAEG,aAAa,IACf,IACF,MAAMQ,QAAYjB,EAAcsB,KAAK,eAAgBJ,GACrDZ,EAAI,CAAEE,SAAUS,EAAIC,OACpBK,EAAMC,QAAQ,gCACdjB,IAAMY,sBACCC,GACPG,EAAMH,MAAMA,EAAMK,SAASP,KAAKQ,QAAO,CACvC,QACIpB,EAAA,CAAEG,aAAa,GAAO,GAI9BkB,MAAOX,MAAOE,IACRZ,EAAA,CAAEI,aAAa,IACf,IACF,MAAMO,QAAYjB,EAAcsB,KAAK,cAAeJ,GACpDZ,EAAI,CAAEE,SAAUS,EAAIC,OACpBK,EAAMC,QAAQ,0BAEdjB,IAAMY,sBACCC,GACPG,EAAMH,MAAMA,EAAMK,SAASP,KAAKQ,QAAO,CACvC,QACIpB,EAAA,CAAEI,aAAa,GAAO,GAI9BkB,OAAQZ,UACF,UACIhB,EAAcsB,KAAK,gBACrBhB,EAAA,CAAEE,SAAU,OAChBe,EAAMC,QAAQ,2BACdjB,IAAMsB,yBACCT,GACPG,EAAMH,MAAMA,EAAMK,SAASP,KAAKQ,QAAO,GAI3CI,cAAed,MAAOE,IAChBZ,EAAA,CAAEK,mBAAmB,IACrB,IACF,MAAMM,QAAYjB,EAAc+B,IAAI,uBAAwBb,GAC5DZ,EAAI,CAAEE,SAAUS,EAAIC,OACpBK,EAAMC,QAAQ,gCAGVN,EAAKc,UACPzB,IAAM0B,wBAEDb,GAEPG,EAAMH,MAAMA,EAAMK,SAASP,KAAKQ,QAAO,CACvC,QACIpB,EAAA,CAAEK,mBAAmB,GAAO,GAIpCQ,cAAe,WACP,MAAAX,SAAEA,GAAaD,IACrB,IAAKC,IAAY,OAAA0B,EAAA3B,IAAMO,iBAAQqB,WAAW,OAEpC,MAAArB,EAASsB,EAxFiE,IAwFpD,CAC1BC,MAAO,CACLC,OAAQ9B,EAAS+B,IACjBP,SAAUxB,EAASwB,UAAYxB,EAASgC,UAE1CpC,iBAAiB,IAEnBU,EAAO2B,UAEHnC,EAAA,CAAEQ,WAECA,EAAA4B,GAAG,kBAAmBC,IACvBrC,EAAA,CAAEO,YAAa8B,GAAS,GAC7B,EAGHV,gBAAiB,KAEf1B,IAAMsB,mBAENtB,IAAMY,eAAc,EAGtBU,iBAAkB,YACZ,OAAAK,EAAA3B,IAAMO,aAAN,EAAAoB,EAAcC,YAAe5B,IAAEO,OAAO8B,aACtCtC,EAAA,CAAEQ,OAAQ,MAAM,MClHlB+B,EAAS,KACb,MAAMjB,OAAEA,EAAApB,SAAQA,GAAaH,IAG3B,OAAAyC,EAAApD,IAAC,UACCqD,UAAU,uGAGVC,eAAC,MAAI,CAAAD,UAAU,8BACbC,SAACrD,OAAA,OAAIoD,UAAU,2CACbC,SAAA,CAACtD,MAAA,OAAIqD,UAAU,0BACbC,SAAArD,OAACsD,GAAKC,GAAG,IAAIH,UAAU,4DACrBC,SAAA,CAAAtD,MAAC,OAAIqD,UAAU,mEACbC,eAACG,EAAc,CAAAJ,UAAU,2BAE1BrD,MAAA,MAAGqD,UAAU,oBAAoBC,SAAM,kBAI5CrD,KAAC,MAAI,CAAAoD,UAAU,0BACbC,SAAA,CAAAF,EAAAnD,KAACsD,EAAA,CACCC,GAAI,YACJH,UAAW,qFAKXC,SAAA,GAACtD,IAAA0D,EAAA,CAASL,UAAU,YACnBrD,MAAA,QAAKqD,UAAU,mBAAmBC,SAAQ,gBAG5CxC,GAEGsC,EAAAnD,KAAA0D,WAAA,CAAAL,SAAA,CAAArD,OAACsD,EAAK,CAAAC,GAAI,WAAYH,UAAW,mBAC/BC,SAAA,GAACtD,IAAA4D,EAAA,CAAKP,UAAU,WACfrD,MAAA,QAAKqD,UAAU,mBAAmBC,SAAO,eAG3CrD,OAAA,UAAOoD,UAAU,0BAA0BQ,QAAS3B,EACnDoB,SAAA,GAACtD,IAAA8D,EAAA,CAAOT,UAAU,WACjBrD,MAAA,QAAKqD,UAAU,mBAAmBC,SAAM,0BAOvD,ECjDSS,EAAgBvD,GAAQI,IAAS,CAC5CoD,MAAOC,aAAaC,QAAQ,eAAiB,SAC7CC,SAAWH,IACIC,aAAAG,QAAQ,aAAcJ,GAC/BpD,EAAA,CAAEoD,SAAO,MCGXK,EAAWC,QAAK,WAAMC,OAAO,kCAAmBC,8BAChDC,EAAaH,QAAK,WAAMC,OAAO,oCAAqBC,gCACpDE,EAAYJ,QAAK,WAAMC,OAAO,mCAAoBC,gCAClDG,EAAeL,QAAK,WAAMC,OAAO,sCAAuBC,8BACxDI,EAAcN,QAAK,WAAMC,OAAO,qCAAsBC,8BAGtDK,EAAa,IACjB7E,MAAC,MAAI,CAAAqD,UAAU,4CACbC,SAACtD,MAAA8E,EAAA,CAAOzB,UAAU,2BAIhB0B,EAAM,KACV,MAAMjE,SAAEA,EAAAO,UAAUA,EAAWH,kBAAmBP,KAC1CqD,MAAEA,GAAUD,IAMd,OAJJiB,aAAU,KACE3D,GAAA,GACT,CAACA,IAEAH,IAAmBJ,QACb+D,EAAW,MAInB5E,KAAC,MAAI,cAAY+D,EACfV,SAAA,CAAAF,EAAApD,IAACmD,EAAO,UAEP8B,EAASA,SAAA,CAAAC,eAAWL,EAAW,IAC9BvB,gBAAC6B,EACC,CAAA7B,SAAA,CAAAtD,MAACoF,EAAM,CAAAC,KAAK,IAAIC,QAASxE,EAAWd,MAACqE,EAAS,MAAMrE,IAAAuF,EAAA,CAAS/B,GAAG,aAC/DxD,MAAAoF,EAAA,CAAMC,KAAK,UAAUC,QAAUxE,EAA4Bd,MAACuF,EAAS,CAAA/B,GAAG,MAA7BJ,EAAApD,IAAAyE,EAAA,CAAW,KACtDzE,MAAAoF,EAAA,CAAMC,KAAK,SAASC,QAAUxE,EAA2Bd,MAACuF,EAAS,CAAA/B,GAAG,MAA5BJ,EAAApD,IAAA0E,EAAA,CAAU,WACpDU,EAAM,CAAAC,KAAK,YAAYC,QAAStF,MAAC2E,GAAa,KAC9C3E,MAAAoF,EAAA,CAAMC,KAAK,WAAWC,QAASxE,EAAYd,MAAA4E,EAAA,CAAY,KAAK5E,IAACuF,EAAS,CAAA/B,GAAG,kBAI9EJ,EAAApD,IAACwF,EAAA,CACCC,SAAS,aACTC,aAAc,CACZC,SAAU,IACVC,MAAO,CACLC,SAAU,OACVC,QAAS,WACTC,SAAU,aAIlB,ECpDJ3F,EAAW4F,SAASC,eAAe,SAASC,OACzClG,MAAAmG,aAAA,CACC7C,SAACtD,MAAAoG,EAAA,CAAcC,OAAQ,CAAEC,sBAAsB,GAC7ChD,SAAAtD,MAAC+E,EAAI","names":["f","require$$0","k","Symbol","for","l","m","Object","prototype","hasOwnProperty","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","p","key","ref","__self","__source","q","c","a","g","b","d","e","h","call","defaultProps","$$typeof","type","props","_owner","current","reactJsxRuntime_production_min","jsx","jsxs","jsxRuntimeModule","exports","createRoot","hydrateRoot","axiosInstance","axios","create","baseURL","withCredentials","useAuthStore","set","get","authUser","isSigningUp","isLoggingIn","isUpdatingProfile","isCheckingAuth","onlineUsers","socket","checkAuth","async","res","data","connectSocket","error","signup","post","toast","success","response","message","login","logout","disconnectSocket","updateProfile","put","username","reconnectSocket","_a","connected","io","query","userId","_id","fullName","connect","on","userIds","disconnect","Navbar","jsxRuntimeExports","className","children","Link","to","MessageSquare","Settings","Fragment","User","onClick","LogOut","useThemeStore","theme","localStorage","getItem","setTheme","setItem","HomePage","lazy","import","__VITE_PRELOAD__","SignUpPage","LoginPage","SettingsPage","ProfilePage","PageLoader","Loader","App","useEffect","Suspense","fallback","Routes","Route","path","element","Navigate","Toaster","position","toastOptions","duration","style","maxWidth","padding","fontSize","document","getElementById","render","StrictMode","BrowserRouter","future","v7_relativeSplatPath"],"ignoreList":[0,1,2],"sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/react-dom/client.js","../../src/lib/axios.js","../../src/store/useAuthStore.js","../../src/components/Navbar.jsx","../../src/store/useThemeStore.js","../../src/App.jsx","../../src/main.jsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","import axios from \"axios\";\r\n\r\nexport const axiosInstance = axios.create({\r\n  baseURL: import.meta.env.MODE === \"development\" ? \"http://localhost:5001/api\" : \"/api\",\r\n  withCredentials: true,\r\n});\r\n","import { create } from \"zustand\";\r\nimport { axiosInstance } from \"../lib/axios.js\";\r\nimport toast from \"react-hot-toast\";\r\nimport { io } from \"socket.io-client\";\r\n\r\nconst BASE_URL = import.meta.env.MODE === \"development\" ? \"http://localhost:5001\" : \"/\";\r\n\r\nexport const useAuthStore = create((set, get) => ({\r\n  authUser: null,\r\n  isSigningUp: false,\r\n  isLoggingIn: false,\r\n  isUpdatingProfile: false,\r\n  isCheckingAuth: true,\r\n  onlineUsers: [],\r\n  socket: null,\r\n\r\n  checkAuth: async () => {\r\n    try {\r\n      const res = await axiosInstance.get(\"/auth/check\");\r\n\r\n      set({ authUser: res.data });\r\n      get().connectSocket();\r\n    } catch (error) {\r\n      console.log(\"Error in checkAuth:\", error);\r\n      set({ authUser: null });\r\n    } finally {\r\n      set({ isCheckingAuth: false });\r\n    }\r\n  },\r\n\r\n  signup: async (data) => {\r\n    set({ isSigningUp: true });\r\n    try {\r\n      const res = await axiosInstance.post(\"/auth/signup\", data);\r\n      set({ authUser: res.data });\r\n      toast.success(\"Account created successfully\");\r\n      get().connectSocket();\r\n    } catch (error) {\r\n      toast.error(error.response.data.message);\r\n    } finally {\r\n      set({ isSigningUp: false });\r\n    }\r\n  },\r\n\r\n  login: async (data) => {\r\n    set({ isLoggingIn: true });\r\n    try {\r\n      const res = await axiosInstance.post(\"/auth/login\", data);\r\n      set({ authUser: res.data });\r\n      toast.success(\"Logged in successfully\");\r\n\r\n      get().connectSocket();\r\n    } catch (error) {\r\n      toast.error(error.response.data.message);\r\n    } finally {\r\n      set({ isLoggingIn: false });\r\n    }\r\n  },\r\n\r\n  logout: async () => {\r\n    try {\r\n      await axiosInstance.post(\"/auth/logout\");\r\n      set({ authUser: null });\r\n      toast.success(\"Logged out successfully\");\r\n      get().disconnectSocket();\r\n    } catch (error) {\r\n      toast.error(error.response.data.message);\r\n    }\r\n  },\r\n\r\n  updateProfile: async (data) => {\r\n    set({ isUpdatingProfile: true });\r\n    try {\r\n      const res = await axiosInstance.put(\"/auth/update-profile\", data);\r\n      set({ authUser: res.data });\r\n      toast.success(\"Profile updated successfully\");\r\n      \r\n      // Reconnect socket to update username info if username was changed\r\n      if (data.username) {\r\n        get().reconnectSocket();\r\n      }\r\n    } catch (error) {\r\n      console.log(\"error in update profile:\", error);\r\n      toast.error(error.response.data.message);\r\n    } finally {\r\n      set({ isUpdatingProfile: false });\r\n    }\r\n  },\r\n\r\n  connectSocket: () => {\r\n    const { authUser } = get();\r\n    if (!authUser || get().socket?.connected) return;\r\n\r\n    const socket = io(BASE_URL, {\r\n      query: {\r\n        userId: authUser._id,\r\n        username: authUser.username || authUser.fullName\r\n      },\r\n      withCredentials: true\r\n    });\r\n    socket.connect();\r\n\r\n    set({ socket: socket });\r\n\r\n    socket.on(\"getOnlineUsers\", (userIds) => {\r\n      set({ onlineUsers: userIds });\r\n    });\r\n  },\r\n  \r\n  reconnectSocket: () => {\r\n    // Disconnect first if connected\r\n    get().disconnectSocket();\r\n    // Then reconnect\r\n    get().connectSocket();\r\n  },\r\n  \r\n  disconnectSocket: () => {\r\n    if (get().socket?.connected) get().socket.disconnect();\r\n    set({ socket: null });\r\n  },\r\n}));\r\n","import { Link } from \"react-router-dom\";\r\nimport { useAuthStore } from \"../store/useAuthStore\";\r\nimport { LogOut, MessageSquare, Settings, User } from \"lucide-react\";\r\n\r\nconst Navbar = () => {\r\n  const { logout, authUser } = useAuthStore();\r\n\r\n  return (\r\n    <header\r\n      className=\"bg-base-100 border-b border-base-300 fixed w-full top-0 z-40 \r\n    backdrop-blur-lg bg-base-100/80\"\r\n    >\r\n      <div className=\"container mx-auto px-4 h-16\">\r\n        <div className=\"flex items-center justify-between h-full\">\r\n          <div className=\"flex items-center gap-8\">\r\n            <Link to=\"/\" className=\"flex items-center gap-2.5 hover:opacity-80 transition-all\">\r\n              <div className=\"size-9 rounded-lg bg-primary/10 flex items-center justify-center\">\r\n                <MessageSquare className=\"w-5 h-5 text-primary\" />\r\n              </div>\r\n              <h1 className=\"text-lg font-bold\">Chatty</h1>\r\n            </Link>\r\n          </div>\r\n\r\n          <div className=\"flex items-center gap-2\">\r\n            <Link\r\n              to={\"/settings\"}\r\n              className={`\r\n              btn btn-sm gap-2 transition-colors\r\n              \r\n              `}\r\n            >\r\n              <Settings className=\"w-4 h-4\" />\r\n              <span className=\"hidden sm:inline\">Settings</span>\r\n            </Link>\r\n\r\n            {authUser && (\r\n              <>\r\n                <Link to={\"/profile\"} className={`btn btn-sm gap-2`}>\r\n                  <User className=\"size-5\" />\r\n                  <span className=\"hidden sm:inline\">Profile</span>\r\n                </Link>\r\n\r\n                <button className=\"flex gap-2 items-center\" onClick={logout}>\r\n                  <LogOut className=\"size-5\" />\r\n                  <span className=\"hidden sm:inline\">Logout</span>\r\n                </button>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\nexport default Navbar;\r\n","import { create } from \"zustand\";\r\n\r\nexport const useThemeStore = create((set) => ({\r\n  theme: localStorage.getItem(\"chat-theme\") || \"coffee\",\r\n  setTheme: (theme) => {\r\n    localStorage.setItem(\"chat-theme\", theme);\r\n    set({ theme });\r\n  },\r\n}));\r\n","import Navbar from \"./components/Navbar\";\r\nimport { lazy, Suspense, useEffect } from \"react\";\r\nimport { Routes, Route, Navigate } from \"react-router-dom\";\r\nimport { useAuthStore } from \"./store/useAuthStore\";\r\nimport { useThemeStore } from \"./store/useThemeStore\";\r\nimport { Loader } from \"lucide-react\";\r\nimport { Toaster } from \"react-hot-toast\";\r\n\r\n// Lazy load route components for better code splitting\r\nconst HomePage = lazy(() => import(\"./pages/HomePage\"));\r\nconst SignUpPage = lazy(() => import(\"./pages/SignUpPage\"));\r\nconst LoginPage = lazy(() => import(\"./pages/LoginPage\"));\r\nconst SettingsPage = lazy(() => import(\"./pages/SettingsPage\"));\r\nconst ProfilePage = lazy(() => import(\"./pages/ProfilePage\"));\r\n\r\n// Loading fallback for lazy-loaded components\r\nconst PageLoader = () => (\r\n  <div className=\"flex items-center justify-center h-screen\">\r\n    <Loader className=\"size-10 animate-spin\" />\r\n  </div>\r\n);\r\n\r\nconst App = () => {\r\n  const { authUser, checkAuth, isCheckingAuth } = useAuthStore();\r\n  const { theme } = useThemeStore();\r\n\r\n  useEffect(() => {\r\n    checkAuth();\r\n  }, [checkAuth]);\r\n\r\n  if (isCheckingAuth && !authUser) {\r\n    return <PageLoader />;\r\n  }\r\n\r\n  return (\r\n    <div data-theme={theme}>\r\n      <Navbar />\r\n\r\n      <Suspense fallback={<PageLoader />}>\r\n        <Routes>\r\n          <Route path=\"/\" element={authUser ? <HomePage /> : <Navigate to=\"/login\" />} />\r\n          <Route path=\"/signup\" element={!authUser ? <SignUpPage /> : <Navigate to=\"/\" />} />\r\n          <Route path=\"/login\" element={!authUser ? <LoginPage /> : <Navigate to=\"/\" />} />\r\n          <Route path=\"/settings\" element={<SettingsPage />} />\r\n          <Route path=\"/profile\" element={authUser ? <ProfilePage /> : <Navigate to=\"/login\" />} />\r\n        </Routes>\r\n      </Suspense>\r\n\r\n      <Toaster \r\n        position=\"top-center\"\r\n        toastOptions={{\r\n          duration: 3000,\r\n          style: {\r\n            maxWidth: '90vw',\r\n            padding: '8px 16px',\r\n            fontSize: '14px'\r\n          },\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\nexport default App;\r\n","import { StrictMode } from \"react\";\r\nimport { createRoot } from \"react-dom/client\";\r\nimport \"./index.css\";\r\nimport App from \"./App.jsx\";\r\n\r\nimport { BrowserRouter } from \"react-router-dom\";\r\n\r\ncreateRoot(document.getElementById(\"root\")).render(\r\n  <StrictMode>\r\n    <BrowserRouter future={{ v7_relativeSplatPath: true }}>\r\n      <App />\r\n    </BrowserRouter>\r\n  </StrictMode>\r\n);\r\n"],"file":"assets/index-CK06dqkR.js"}