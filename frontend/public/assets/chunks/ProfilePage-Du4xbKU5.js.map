{"version":3,"file":"ProfilePage-Du4xbKU5.js","sources":["../../../src/pages/ProfilePage.jsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { useAuthStore } from \"../store/useAuthStore\";\r\nimport { AtSign, Camera, Mail, Pencil, User } from \"lucide-react\";\r\nimport toast from \"react-hot-toast\";\r\n\r\nconst ProfilePage = () => {\r\n  const { authUser, isUpdatingProfile, updateProfile } = useAuthStore();\r\n  const [selectedImg, setSelectedImg] = useState(null);\r\n  const [isEditingUsername, setIsEditingUsername] = useState(false);\r\n  const [newUsername, setNewUsername] = useState(\"\");\r\n\r\n  const handleImageUpload = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n\r\n    const reader = new FileReader();\r\n\r\n    reader.readAsDataURL(file);\r\n\r\n    reader.onload = async () => {\r\n      const base64Image = reader.result;\r\n      setSelectedImg(base64Image);\r\n      await updateProfile({ profilePic: base64Image });\r\n    };\r\n  };\r\n\r\n  const handleUsernameEdit = () => {\r\n    if (isEditingUsername) {\r\n      if (newUsername.trim() === \"\") {\r\n        toast.error(\"Username cannot be empty\");\r\n        return;\r\n      }\r\n\r\n      if (newUsername.trim().length < 3) {\r\n        toast.error(\"Username must be at least 3 characters\");\r\n        return;\r\n      }\r\n\r\n      updateProfile({ username: newUsername.trim().toLowerCase() })\r\n        .then(() => {\r\n          setIsEditingUsername(false);\r\n          setNewUsername(\"\");\r\n        })\r\n        .catch((error) => {\r\n          console.error(error);\r\n        });\r\n    } else {\r\n      setNewUsername(authUser.username || \"\");\r\n      setIsEditingUsername(true);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"h-screen pt-20\">\r\n      <div className=\"max-w-2xl mx-auto p-4 py-8\">\r\n        <div className=\"bg-base-300 rounded-xl p-6 space-y-8\">\r\n          <div className=\"text-center\">\r\n            <h1 className=\"text-2xl font-semibold \">Profile</h1>\r\n            <p className=\"mt-2\">Your profile information</p>\r\n          </div>\r\n\r\n          {/* avatar upload section */}\r\n\r\n          <div className=\"flex flex-col items-center gap-4\">\r\n            <div className=\"relative\">\r\n              <img\r\n                src={selectedImg || authUser.profilePic || \"/avatar.png\"}\r\n                alt=\"Profile\"\r\n                className=\"size-32 rounded-full object-cover border-4 \"\r\n              />\r\n              <label\r\n                htmlFor=\"avatar-upload\"\r\n                className={`\r\n                  absolute bottom-0 right-0 \r\n                  bg-base-content hover:scale-105\r\n                  p-2 rounded-full cursor-pointer \r\n                  transition-all duration-200\r\n                  ${isUpdatingProfile ? \"animate-pulse pointer-events-none\" : \"\"}\r\n                `}\r\n              >\r\n                <Camera className=\"w-5 h-5 text-base-200\" />\r\n                <input\r\n                  type=\"file\"\r\n                  id=\"avatar-upload\"\r\n                  className=\"hidden\"\r\n                  accept=\"image/*\"\r\n                  onChange={handleImageUpload}\r\n                  disabled={isUpdatingProfile}\r\n                />\r\n              </label>\r\n            </div>\r\n            <p className=\"text-sm text-zinc-400\">\r\n              {isUpdatingProfile ? \"Uploading...\" : \"Click the camera icon to update your photo\"}\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"space-y-6\">\r\n            <div className=\"space-y-1.5\">\r\n              <div className=\"text-sm text-zinc-400 flex items-center gap-2\">\r\n                <User className=\"w-4 h-4\" />\r\n                Full Name\r\n              </div>\r\n              <p className=\"px-4 py-2.5 bg-base-200 rounded-lg border\">{authUser?.fullName}</p>\r\n            </div>\r\n\r\n            <div className=\"space-y-1.5\">\r\n              <div className=\"text-sm text-zinc-400 flex items-center gap-2\">\r\n                <AtSign className=\"w-4 h-4\" />\r\n                Username\r\n                <button \r\n                  onClick={handleUsernameEdit}\r\n                  className=\"ml-auto flex items-center gap-1 text-primary hover:text-primary-focus\"\r\n                  disabled={isUpdatingProfile}\r\n                >\r\n                  <Pencil className=\"w-3 h-3\" />\r\n                  <span className=\"text-xs\">{isEditingUsername ? \"Save\" : \"Edit\"}</span>\r\n                </button>\r\n              </div>\r\n              {isEditingUsername ? (\r\n                <div className=\"relative\">\r\n                  <input\r\n                    type=\"text\"\r\n                    value={newUsername}\r\n                    onChange={(e) => setNewUsername(e.target.value)}\r\n                    className=\"w-full px-4 py-2.5 bg-base-200 rounded-lg border focus:border-primary focus:outline-none\"\r\n                    placeholder=\"Enter new username\"\r\n                    disabled={isUpdatingProfile}\r\n                  />\r\n                </div>\r\n              ) : (\r\n                <p className=\"px-4 py-2.5 bg-base-200 rounded-lg border\">@{authUser?.username}</p>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"space-y-1.5\">\r\n              <div className=\"text-sm text-zinc-400 flex items-center gap-2\">\r\n                <Mail className=\"w-4 h-4\" />\r\n                Email Address\r\n              </div>\r\n              <p className=\"px-4 py-2.5 bg-base-200 rounded-lg border\">{authUser?.email}</p>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"mt-6 bg-base-300 rounded-xl p-6\">\r\n            <h2 className=\"text-lg font-medium  mb-4\">Account Information</h2>\r\n            <div className=\"space-y-3 text-sm\">\r\n              <div className=\"flex items-center justify-between py-2 border-b border-zinc-700\">\r\n                <span>Member Since</span>\r\n                <span>{authUser.createdAt?.split(\"T\")[0]}</span>\r\n              </div>\r\n              <div className=\"flex items-center justify-between py-2\">\r\n                <span>Account Status</span>\r\n                <span className=\"text-green-500\">Active</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default ProfilePage;\r\n"],"names":["ProfilePage","authUser","isUpdatingProfile","updateProfile","useAuthStore","selectedImg","setSelectedImg","useState","isEditingUsername","setIsEditingUsername","newUsername","setNewUsername","jsx","className","children","jsxRuntimeExports","jsxs","src","profilePic","alt","htmlFor","Camera","type","id","accept","onChange","async","e","file","target","files","reader","FileReader","readAsDataURL","onload","base64Image","result","disabled","User","fullName","AtSign","onClick","trim","toast","error","length","username","toLowerCase","then","catch","Pencil","value","placeholder","Mail","email","_a","createdAt","split"],"mappings":"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"}